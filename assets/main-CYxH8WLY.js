(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ne(){return new URLSearchParams(window.location.search).get("id")}function g(){return window.location.pathname}function ae(){return g().replace(/^\//,"").replace(".html","")}function nt(){return new URLSearchParams(window.location.search).get("title")}function at(e){try{return new URL(e),!0}catch{return!1}}const re=" -- The Movie Tracker",Fe="https://www.themoviedb.org/movie/",rt="https://image.tmdb.org/t/p/original",G="https://image.tmdb.org/t/p/w220_and_h330_face",ot="https://movies.gila.workers.dev",Me="/genres",be="/search/genre",ut="/search/movie/description",st="/search/movie/byTitle",it="/search/movie/byId",ct="/popular",ve={TMBDIcon:"/icons/TMDB.svg",filmIcon:"/icons/filmIcon.svg"},Te="./src/assets/images/no-Image-Placeholder.svg",lt=["id","title","tagline","backdrop_path","poster_path","genres","homepage","origin_country","spoken_languages","overview","release_date","vote_average","runtime","cast","directors"],dt=["id","title","poster_path","overview","release_date"],L=document.getElementById("movie"),E="full-movie__",De={items:`${E}lst-item`,genreItems:[`${E}lst-item`,`${E}genre`]},l={content:`${E}content`,facts:`${E}facts`,director:`${E}director`,cast:`${E}cast`,shownCast:`${E}feature-value--shown`,hiddenCast:`${E}feature-value--hidden`,castBtn:`${E}cast-btn`,description:`${E}description`,genres:`${E}genres`,genre:`${E}genre`,links:`${E}links`,link:`${E}link`,linkIcon:`${E}link-icon`,year:`${E}year`,country:`${E}country`,language:`${E}language`,runtime:`${E}runtime`,rating:`${E}rating`},j={btn:"castBtn",hidden:"castHidden"};function B(e,t=!1){const n=document.querySelector(".error-msg");n.style.display="block",e.style.display="none",t&&(n.textContent=t)}function St(e){return!e||Object.keys(e).length===0?(console.error("Error: Movie data is empty."),null):Object.fromEntries(Object.entries(e).filter(([n,a])=>lt.includes(n)))}function Et(e){const t={},n=Object.entries(e);for(const[a,r]of n)dt.includes(a)&&(t[a]=r);return t}function ft(e,t){const n=Et(t);e.dataset.movie=JSON.stringify(n)}async function p(e){try{let t=await fetch(`${ot}${e}`);if(!t.ok)throw console.log("Cannot fetch data form the server"),new Error("HTTP Error: "+t.status);return await t.json()}catch(t){return console.error("Error while loading from server",t),null}}async function It(e,t){return(await p(`${e}&page=${t}`)).results}const ht="full-movie__",ye="movie-banner",he=ye+"__",b={banner:`${ye}`,title:`${he}title`,tagline:[`${he}tagline`,`${ht}feature`]};function c(e,t,n=!1,a=!1){const r=document.createElement(e);return Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t),n&&r.setAttribute("id",n),a&&(r.textContent=a),r}function Ct(e,t,n,a){const r=c("button",e);return r.append(oe(t,n,a)),r}function Le(e,t,n,a,r){const s=c("a",e);s.setAttribute("target","_blank"),s.setAttribute("href",n);const d=oe(t,a,r);return s.append(d),s}function oe(e,t,n){const a=c("img",e);return a.setAttribute("src",t),a.setAttribute("alt",n),a}function Ne(e,t,n,a=!1){e.forEach(r=>{const s=c("li",n,!1,a?r[1]:r);t.append(s),a&&(s.dataset.id=r[0])})}const C={controlBar:"control-bar",btnFav:["control-bar__btn","fav-btn"],btnWatch:["control-bar__btn","watch-btn"],tooltip:"control-bar__tooltip",icon:"control-bar__icon"},O={likeIcon:"/icons/likeIcon.svg",dislikeIcon:"/icons/dislikeIcon.svg",addIcon:"/icons/addIcon.svg",addedIcon:"/icons/addedIcon.svg"};function U(e,t){return window.localStorage.getItem(t)?JSON.parse(window.localStorage.getItem(t)).some(a=>Number(a.id)===e):(window.localStorage.setItem(t,JSON.stringify([])),!1)}function Pe(e,t){if(!U(e,t))return;const a=JSON.parse(window.localStorage.getItem(t)).filter(r=>Number(r.id)!==e);window.localStorage.setItem(t,JSON.stringify(a))}function At(e,t){const n=JSON.parse(window.localStorage.getItem(t));U(e.id,t)||(n.push(e),window.localStorage.setItem(t,JSON.stringify(n)))}function Ge(e){return JSON.parse(window.localStorage.getItem(e))}function mt(e){window.localStorage.setItem("movies",JSON.stringify(e))}function ue(e){const t=c("div",C.controlBar);ft(t,e);const n=pt(e),a=gt(e);return t.append(n,a),t}function pt(e){const t=U(e.id,"favorites"),n=t?O.dislikeIcon:O.likeIcon,a=se(C.btnFav,n,t?"remove from favorites":"add to favorites");return a.dataset.state=t?"on":"off",a}function gt(e){const t=U(e.id,"watchlist"),n=t?O.addedIcon:O.addIcon,a=se(C.btnWatch,n,t?"remove from watchlist":"add to watchlist");return a.dataset.state=t?"on":"off",a}function se(e,t,n){const a=Ct(e,C.icon,t,"button icon"),r=c("span",C.tooltip,!1,n);return a.append(r),a}function Re(e){const t=c("div",b.banner);t.dataset.id=e.id;const n=Ot(e);if(t.append(n),e.tagline){const a=c("p",b.tagline,!1,e.tagline);t.append(a)}return t.append(ue(e)),t}function Ot(e){return c("h1",b.title,!1,e.title||"Unknown")}function we(e,t){const n=getComputedStyle(e).backgroundImage,a=t.backdrop_path||t.poster_path;if(a){const r=t.backdrop_path?rt:G,s=r+a;if(at(s)){const d=n.replace(/url\(["']?(.*?)["']?\)/,`url("${r+a}")`);e.style.backgroundImage=d}}}function ie(e,t){const n=e.textContent;t.length>1&&(e.textContent=n.slice(0,e.textContent.length-1)+"s")}function Ue(e,t){const n=e.querySelector("h2"),a=e.querySelector("p");t.length>1&&ie(n,t),a.textContent=t.join(", ")}function Bt(e,t){return e.map(n=>n[t])}function Ft(e){return e.map(t=>Object.values(t))}function Mt(e){const t=document.querySelector("."+l.content),n=t.querySelector("."+l.director);bt(n,e.directors);const a=t.querySelector("."+l.cast);vt(a,e.cast);const r=t.querySelector("."+l.description);yt(r,e.overview);const s=t.querySelector("."+l.genres);Lt(s,e.genres);const d=t.querySelector("."+l.links);Pt(d,e)}function bt(e,t){Array.isArray(t)&&t.length>0&&Ue(e,t)}function vt(e,t){if(Array.isArray(t)&&t.length){const n=e.querySelector("p");n.textContent="",Tt(n,t)}}function Tt(e,t){if(t.length>5){const[n,a]=Dt(t),r=c("span",l.shownCast,!1,n+", "),s=c("span",l.hiddenCast,j.hidden,a+" "),d=c("button",l.castBtn,j.btn,"see more...");e.append(r,s,d)}else e.textContent=t.join(", ");return e}function Dt(e){const n=e.slice(0,5).join(", "),r=e.slice(5).join(", ");return[n,r]}function yt(e,t){if(t){const n=e.querySelector("p");n.textContent=t}}function Lt(e,t){if(Array.isArray(t)&&t.length){const n=e.querySelector("h2");ie(n,t);const a=e.querySelector("ul");Nt(a,t)}}function Nt(e,t){e.innerHTML="";const n=Ft(t);Ne(n,e,De.genreItems,!0)}function Pt(e,t){Gt(e,t.id),t.homepage&&e.querySelector("p").append(Le(l.link,l.linkIcon,t.homepage,ve.filmIcon,"film icon"))}function Gt(e,t){e.querySelector("a").setAttribute("href",`${Fe}${t}`)}function Rt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y={};const wt=JSON.parse('[["AF","AFG","004","ISO 3166-2:AF"],["AL","ALB","008","ISO 3166-2:AL"],["DZ","DZA","012","ISO 3166-2:DZ"],["AS","ASM","016","ISO 3166-2:AS"],["AD","AND","020","ISO 3166-2:AD"],["AO","AGO","024","ISO 3166-2:AO"],["AI","AIA","660","ISO 3166-2:AI"],["AQ","ATA","010","ISO 3166-2:AQ"],["AG","ATG","028","ISO 3166-2:AG"],["AR","ARG","032","ISO 3166-2:AR"],["AM","ARM","051","ISO 3166-2:AM"],["AW","ABW","533","ISO 3166-2:AW"],["AU","AUS","036","ISO 3166-2:AU"],["AT","AUT","040","ISO 3166-2:AT"],["AZ","AZE","031","ISO 3166-2:AZ"],["BS","BHS","044","ISO 3166-2:BS"],["BH","BHR","048","ISO 3166-2:BH"],["BD","BGD","050","ISO 3166-2:BD"],["BB","BRB","052","ISO 3166-2:BB"],["BY","BLR","112","ISO 3166-2:BY"],["BE","BEL","056","ISO 3166-2:BE"],["BZ","BLZ","084","ISO 3166-2:BZ"],["BJ","BEN","204","ISO 3166-2:BJ"],["BM","BMU","060","ISO 3166-2:BM"],["BT","BTN","064","ISO 3166-2:BT"],["BO","BOL","068","ISO 3166-2:BO"],["BA","BIH","070","ISO 3166-2:BA"],["BW","BWA","072","ISO 3166-2:BW"],["BV","BVT","074","ISO 3166-2:BV"],["BR","BRA","076","ISO 3166-2:BR"],["IO","IOT","086","ISO 3166-2:IO"],["BN","BRN","096","ISO 3166-2:BN"],["BG","BGR","100","ISO 3166-2:BG"],["BF","BFA","854","ISO 3166-2:BF"],["BI","BDI","108","ISO 3166-2:BI"],["KH","KHM","116","ISO 3166-2:KH"],["CM","CMR","120","ISO 3166-2:CM"],["CA","CAN","124","ISO 3166-2:CA"],["CV","CPV","132","ISO 3166-2:CV"],["KY","CYM","136","ISO 3166-2:KY"],["CF","CAF","140","ISO 3166-2:CF"],["TD","TCD","148","ISO 3166-2:TD"],["CL","CHL","152","ISO 3166-2:CL"],["CN","CHN","156","ISO 3166-2:CN"],["CX","CXR","162","ISO 3166-2:CX"],["CC","CCK","166","ISO 3166-2:CC"],["CO","COL","170","ISO 3166-2:CO"],["KM","COM","174","ISO 3166-2:KM"],["CG","COG","178","ISO 3166-2:CG"],["CD","COD","180","ISO 3166-2:CD"],["CK","COK","184","ISO 3166-2:CK"],["CR","CRI","188","ISO 3166-2:CR"],["CI","CIV","384","ISO 3166-2:CI"],["HR","HRV","191","ISO 3166-2:HR"],["CU","CUB","192","ISO 3166-2:CU"],["CY","CYP","196","ISO 3166-2:CY"],["CZ","CZE","203","ISO 3166-2:CZ"],["DK","DNK","208","ISO 3166-2:DK"],["DJ","DJI","262","ISO 3166-2:DJ"],["DM","DMA","212","ISO 3166-2:DM"],["DO","DOM","214","ISO 3166-2:DO"],["EC","ECU","218","ISO 3166-2:EC"],["EG","EGY","818","ISO 3166-2:EG"],["SV","SLV","222","ISO 3166-2:SV"],["GQ","GNQ","226","ISO 3166-2:GQ"],["ER","ERI","232","ISO 3166-2:ER"],["EE","EST","233","ISO 3166-2:EE"],["ET","ETH","231","ISO 3166-2:ET"],["FK","FLK","238","ISO 3166-2:FK"],["FO","FRO","234","ISO 3166-2:FO"],["FJ","FJI","242","ISO 3166-2:FJ"],["FI","FIN","246","ISO 3166-2:FI"],["FR","FRA","250","ISO 3166-2:FR"],["GF","GUF","254","ISO 3166-2:GF"],["PF","PYF","258","ISO 3166-2:PF"],["TF","ATF","260","ISO 3166-2:TF"],["GA","GAB","266","ISO 3166-2:GA"],["GM","GMB","270","ISO 3166-2:GM"],["GE","GEO","268","ISO 3166-2:GE"],["DE","DEU","276","ISO 3166-2:DE"],["GH","GHA","288","ISO 3166-2:GH"],["GI","GIB","292","ISO 3166-2:GI"],["GR","GRC","300","ISO 3166-2:GR"],["GL","GRL","304","ISO 3166-2:GL"],["GD","GRD","308","ISO 3166-2:GD"],["GP","GLP","312","ISO 3166-2:GP"],["GU","GUM","316","ISO 3166-2:GU"],["GT","GTM","320","ISO 3166-2:GT"],["GN","GIN","324","ISO 3166-2:GN"],["GW","GNB","624","ISO 3166-2:GW"],["GY","GUY","328","ISO 3166-2:GY"],["HT","HTI","332","ISO 3166-2:HT"],["HM","HMD","334","ISO 3166-2:HM"],["VA","VAT","336","ISO 3166-2:VA"],["HN","HND","340","ISO 3166-2:HN"],["HK","HKG","344","ISO 3166-2:HK"],["HU","HUN","348","ISO 3166-2:HU"],["IS","ISL","352","ISO 3166-2:IS"],["IN","IND","356","ISO 3166-2:IN"],["ID","IDN","360","ISO 3166-2:ID"],["IR","IRN","364","ISO 3166-2:IR"],["IQ","IRQ","368","ISO 3166-2:IQ"],["IE","IRL","372","ISO 3166-2:IE"],["IL","ISR","376","ISO 3166-2:IL"],["IT","ITA","380","ISO 3166-2:IT"],["JM","JAM","388","ISO 3166-2:JM"],["JP","JPN","392","ISO 3166-2:JP"],["JO","JOR","400","ISO 3166-2:JO"],["KZ","KAZ","398","ISO 3166-2:KZ"],["KE","KEN","404","ISO 3166-2:KE"],["KI","KIR","296","ISO 3166-2:KI"],["KP","PRK","408","ISO 3166-2:KP"],["KR","KOR","410","ISO 3166-2:KR"],["KW","KWT","414","ISO 3166-2:KW"],["KG","KGZ","417","ISO 3166-2:KG"],["LA","LAO","418","ISO 3166-2:LA"],["LV","LVA","428","ISO 3166-2:LV"],["LB","LBN","422","ISO 3166-2:LB"],["LS","LSO","426","ISO 3166-2:LS"],["LR","LBR","430","ISO 3166-2:LR"],["LY","LBY","434","ISO 3166-2:LY"],["LI","LIE","438","ISO 3166-2:LI"],["LT","LTU","440","ISO 3166-2:LT"],["LU","LUX","442","ISO 3166-2:LU"],["MO","MAC","446","ISO 3166-2:MO"],["MG","MDG","450","ISO 3166-2:MG"],["MW","MWI","454","ISO 3166-2:MW"],["MY","MYS","458","ISO 3166-2:MY"],["MV","MDV","462","ISO 3166-2:MV"],["ML","MLI","466","ISO 3166-2:ML"],["MT","MLT","470","ISO 3166-2:MT"],["MH","MHL","584","ISO 3166-2:MH"],["MQ","MTQ","474","ISO 3166-2:MQ"],["MR","MRT","478","ISO 3166-2:MR"],["MU","MUS","480","ISO 3166-2:MU"],["YT","MYT","175","ISO 3166-2:YT"],["MX","MEX","484","ISO 3166-2:MX"],["FM","FSM","583","ISO 3166-2:FM"],["MD","MDA","498","ISO 3166-2:MD"],["MC","MCO","492","ISO 3166-2:MC"],["MN","MNG","496","ISO 3166-2:MN"],["MS","MSR","500","ISO 3166-2:MS"],["MA","MAR","504","ISO 3166-2:MA"],["MZ","MOZ","508","ISO 3166-2:MZ"],["MM","MMR","104","ISO 3166-2:MM"],["NA","NAM","516","ISO 3166-2:NA"],["NR","NRU","520","ISO 3166-2:NR"],["NP","NPL","524","ISO 3166-2:NP"],["NL","NLD","528","ISO 3166-2:NL"],["NC","NCL","540","ISO 3166-2:NC"],["NZ","NZL","554","ISO 3166-2:NZ"],["NI","NIC","558","ISO 3166-2:NI"],["NE","NER","562","ISO 3166-2:NE"],["NG","NGA","566","ISO 3166-2:NG"],["NU","NIU","570","ISO 3166-2:NU"],["NF","NFK","574","ISO 3166-2:NF"],["MP","MNP","580","ISO 3166-2:MP"],["MK","MKD","807","ISO 3166-2:MK"],["NO","NOR","578","ISO 3166-2:NO"],["OM","OMN","512","ISO 3166-2:OM"],["PK","PAK","586","ISO 3166-2:PK"],["PW","PLW","585","ISO 3166-2:PW"],["PS","PSE","275","ISO 3166-2:PS"],["PA","PAN","591","ISO 3166-2:PA"],["PG","PNG","598","ISO 3166-2:PG"],["PY","PRY","600","ISO 3166-2:PY"],["PE","PER","604","ISO 3166-2:PE"],["PH","PHL","608","ISO 3166-2:PH"],["PN","PCN","612","ISO 3166-2:PN"],["PL","POL","616","ISO 3166-2:PL"],["PT","PRT","620","ISO 3166-2:PT"],["PR","PRI","630","ISO 3166-2:PR"],["QA","QAT","634","ISO 3166-2:QA"],["RE","REU","638","ISO 3166-2:RE"],["RO","ROU","642","ISO 3166-2:RO"],["RU","RUS","643","ISO 3166-2:RU"],["RW","RWA","646","ISO 3166-2:RW"],["SH","SHN","654","ISO 3166-2:SH"],["KN","KNA","659","ISO 3166-2:KN"],["LC","LCA","662","ISO 3166-2:LC"],["PM","SPM","666","ISO 3166-2:PM"],["VC","VCT","670","ISO 3166-2:VC"],["WS","WSM","882","ISO 3166-2:WS"],["SM","SMR","674","ISO 3166-2:SM"],["ST","STP","678","ISO 3166-2:ST"],["SA","SAU","682","ISO 3166-2:SA"],["SN","SEN","686","ISO 3166-2:SN"],["SC","SYC","690","ISO 3166-2:SC"],["SL","SLE","694","ISO 3166-2:SL"],["SG","SGP","702","ISO 3166-2:SG"],["SK","SVK","703","ISO 3166-2:SK"],["SI","SVN","705","ISO 3166-2:SI"],["SB","SLB","090","ISO 3166-2:SB"],["SO","SOM","706","ISO 3166-2:SO"],["ZA","ZAF","710","ISO 3166-2:ZA"],["GS","SGS","239","ISO 3166-2:GS"],["ES","ESP","724","ISO 3166-2:ES"],["LK","LKA","144","ISO 3166-2:LK"],["SD","SDN","729","ISO 3166-2:SD"],["SR","SUR","740","ISO 3166-2:SR"],["SJ","SJM","744","ISO 3166-2:SJ"],["SZ","SWZ","748","ISO 3166-2:SZ"],["SE","SWE","752","ISO 3166-2:SE"],["CH","CHE","756","ISO 3166-2:CH"],["SY","SYR","760","ISO 3166-2:SY"],["TW","TWN","158","ISO 3166-2:TW"],["TJ","TJK","762","ISO 3166-2:TJ"],["TZ","TZA","834","ISO 3166-2:TZ"],["TH","THA","764","ISO 3166-2:TH"],["TL","TLS","626","ISO 3166-2:TL"],["TG","TGO","768","ISO 3166-2:TG"],["TK","TKL","772","ISO 3166-2:TK"],["TO","TON","776","ISO 3166-2:TO"],["TT","TTO","780","ISO 3166-2:TT"],["TN","TUN","788","ISO 3166-2:TN"],["TR","TUR","792","ISO 3166-2:TR"],["TM","TKM","795","ISO 3166-2:TM"],["TC","TCA","796","ISO 3166-2:TC"],["TV","TUV","798","ISO 3166-2:TV"],["UG","UGA","800","ISO 3166-2:UG"],["UA","UKR","804","ISO 3166-2:UA"],["AE","ARE","784","ISO 3166-2:AE"],["GB","GBR","826","ISO 3166-2:GB"],["US","USA","840","ISO 3166-2:US"],["UM","UMI","581","ISO 3166-2:UM"],["UY","URY","858","ISO 3166-2:UY"],["UZ","UZB","860","ISO 3166-2:UZ"],["VU","VUT","548","ISO 3166-2:VU"],["VE","VEN","862","ISO 3166-2:VE"],["VN","VNM","704","ISO 3166-2:VN"],["VG","VGB","092","ISO 3166-2:VG"],["VI","VIR","850","ISO 3166-2:VI"],["WF","WLF","876","ISO 3166-2:WF"],["EH","ESH","732","ISO 3166-2:EH"],["YE","YEM","887","ISO 3166-2:YE"],["ZM","ZMB","894","ISO 3166-2:ZM"],["ZW","ZWE","716","ISO 3166-2:ZW"],["AX","ALA","248","ISO 3166-2:AX"],["BQ","BES","535","ISO 3166-2:BQ"],["CW","CUW","531","ISO 3166-2:CW"],["GG","GGY","831","ISO 3166-2:GG"],["IM","IMN","833","ISO 3166-2:IM"],["JE","JEY","832","ISO 3166-2:JE"],["ME","MNE","499","ISO 3166-2:ME"],["BL","BLM","652","ISO 3166-2:BL"],["MF","MAF","663","ISO 3166-2:MF"],["RS","SRB","688","ISO 3166-2:RS"],["SX","SXM","534","ISO 3166-2:SX"],["SS","SSD","728","ISO 3166-2:SS"],["XK","XKK","983","ISO 3166-2:XK"]]'),Ut=["br","cy","dv","sw","eu","af","am","ha","ku","ml","mt","no","ps","sd","so","sq","ta","tg","tt","ug","ur","vi","ar","az","be","bg","bn","bs","ca","cs","da","de","el","en","es","et","fa","fi","fr","ga","gl","he","hi","hr","hu","hy","id","is","it","ja","ka","kk","km","ko","ky","lt","lv","mk","mn","mr","ms","nb","nl","nn","pl","pt","ro","ru","sk","sl","sr","sv","th","tk","tr","uk","uz","zh"];var D={},Ce;function kt(){if(Ce)return D;Ce=1,D.remove=s;for(var e=[{base:" ",chars:" "},{base:"0",chars:"߀"},{base:"A",chars:"ⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",chars:"Ꜳ"},{base:"AE",chars:"ÆǼǢ"},{base:"AO",chars:"Ꜵ"},{base:"AU",chars:"Ꜷ"},{base:"AV",chars:"ꜸꜺ"},{base:"AY",chars:"Ꜽ"},{base:"B",chars:"ⒷＢḂḄḆɃƁ"},{base:"C",chars:"ⒸＣꜾḈĆCĈĊČÇƇȻ"},{base:"D",chars:"ⒹＤḊĎḌḐḒḎĐƊƉᴅꝹ"},{base:"Dh",chars:"Ð"},{base:"DZ",chars:"ǱǄ"},{base:"Dz",chars:"ǲǅ"},{base:"E",chars:"ɛⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎᴇ"},{base:"F",chars:"ꝼⒻＦḞƑꝻ"},{base:"G",chars:"ⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾɢ"},{base:"H",chars:"ⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",chars:"ⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",chars:"ⒿＪĴɈȷ"},{base:"K",chars:"ⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",chars:"ⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",chars:"Ǉ"},{base:"Lj",chars:"ǈ"},{base:"M",chars:"ⓂＭḾṀṂⱮƜϻ"},{base:"N",chars:"ꞤȠⓃＮǸŃÑṄŇṆŅṊṈƝꞐᴎ"},{base:"NJ",chars:"Ǌ"},{base:"Nj",chars:"ǋ"},{base:"O",chars:"ⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OE",chars:"Œ"},{base:"OI",chars:"Ƣ"},{base:"OO",chars:"Ꝏ"},{base:"OU",chars:"Ȣ"},{base:"P",chars:"ⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",chars:"ⓆＱꝖꝘɊ"},{base:"R",chars:"ⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",chars:"ⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",chars:"ⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"Th",chars:"Þ"},{base:"TZ",chars:"Ꜩ"},{base:"U",chars:"ⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",chars:"ⓋＶṼṾƲꝞɅ"},{base:"VY",chars:"Ꝡ"},{base:"W",chars:"ⓌＷẀẂŴẆẄẈⱲ"},{base:"X",chars:"ⓍＸẊẌ"},{base:"Y",chars:"ⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",chars:"ⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",chars:"ⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑ"},{base:"aa",chars:"ꜳ"},{base:"ae",chars:"æǽǣ"},{base:"ao",chars:"ꜵ"},{base:"au",chars:"ꜷ"},{base:"av",chars:"ꜹꜻ"},{base:"ay",chars:"ꜽ"},{base:"b",chars:"ⓑｂḃḅḇƀƃɓƂ"},{base:"c",chars:"ｃⓒćĉċčçḉƈȼꜿↄ"},{base:"d",chars:"ⓓｄḋďḍḑḓḏđƌɖɗƋᏧԁꞪ"},{base:"dh",chars:"ð"},{base:"dz",chars:"ǳǆ"},{base:"e",chars:"ⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇǝ"},{base:"f",chars:"ⓕｆḟƒ"},{base:"ff",chars:"ﬀ"},{base:"fi",chars:"ﬁ"},{base:"fl",chars:"ﬂ"},{base:"ffi",chars:"ﬃ"},{base:"ffl",chars:"ﬄ"},{base:"g",chars:"ⓖｇǵĝḡğġǧģǥɠꞡꝿᵹ"},{base:"h",chars:"ⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",chars:"ƕ"},{base:"i",chars:"ⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",chars:"ⓙｊĵǰɉ"},{base:"k",chars:"ⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",chars:"ⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇɭ"},{base:"lj",chars:"ǉ"},{base:"m",chars:"ⓜｍḿṁṃɱɯ"},{base:"n",chars:"ⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥлԉ"},{base:"nj",chars:"ǌ"},{base:"o",chars:"ⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿꝋꝍɵɔᴑ"},{base:"oe",chars:"œ"},{base:"oi",chars:"ƣ"},{base:"oo",chars:"ꝏ"},{base:"ou",chars:"ȣ"},{base:"p",chars:"ⓟｐṕṗƥᵽꝑꝓꝕρ"},{base:"q",chars:"ⓠｑɋꝗꝙ"},{base:"r",chars:"ⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",chars:"ⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛʂ"},{base:"ss",chars:"ß"},{base:"t",chars:"ⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"th",chars:"þ"},{base:"tz",chars:"ꜩ"},{base:"u",chars:"ⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",chars:"ⓥｖṽṿʋꝟʌ"},{base:"vy",chars:"ꝡ"},{base:"w",chars:"ⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",chars:"ⓧｘẋẍ"},{base:"y",chars:"ⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",chars:"ⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],t={},n=0;n<e.length;n+=1)for(var a=e[n].chars,r=0;r<a.length;r+=1)t[a[r]]=e[n].base;function s(d){return d.replace(/[^\u0000-\u007e]/g,function(A){return t[A]||A})}return D.replacementList=e,D.diacriticsMap=t,D}var Ae;function _t(){return Ae||(Ae=1,function(e){const t=wt,n=Ut,a=kt().remove,r={},s={},d={},A={},H={};t.forEach(function(o){const u=o;s[u[0]]=u[1],d[u[1]]=u[0],A[u[2]]=u[0],H[u[0]]=u[2]});function Ee(o){return("000"+(o||"")).slice(-3)}function T(o,u){return Object.prototype.hasOwnProperty.call(o,u)}function Xe(o,u){return Object.keys(o).reduce(function(S,I){const i=o[I];return S[I]=u(i,I),S},{})}function fe(o,u){switch(o){case"official":return Array.isArray(u)?u[0]:u;case"all":return typeof u=="string"?[u]:u;case"alias":return Array.isArray(u)?u[1]||u[0]:u;default:throw new TypeError("LocaleNameType must be one of these: all, official, alias!")}}e.registerLocale=function(o){if(!o.locale)throw new TypeError("Missing localeData.locale");if(!o.countries)throw new TypeError("Missing localeData.countries");r[o.locale]=o.countries};function V(o){return d[o]}e.alpha3ToAlpha2=V;function W(o){return s[o]}e.alpha2ToAlpha3=W;function je(o){return H[V(o)]}e.alpha3ToNumeric=je;function et(o){return H[o]}e.alpha2ToNumeric=et;function q(o){const u=Ee(o);return W(A[u])}e.numericToAlpha3=q;function Z(o){const u=Ee(o);return A[u]}e.numericToAlpha2=Z;function tt(o){if(typeof o=="string"){if(/^[0-9]*$/.test(o))return q(o);if(o.length===2)return W(o.toUpperCase());if(o.length===3)return o.toUpperCase()}if(typeof o=="number")return q(o)}e.toAlpha3=tt;function Ie(o){if(typeof o=="string"){if(/^[0-9]*$/.test(o))return Z(o);if(o.length===2)return o.toUpperCase();if(o.length===3)return V(o.toUpperCase())}if(typeof o=="number")return Z(o)}e.toAlpha2=Ie,e.getName=function(o,u,S={}){"select"in S||(S.select="official");try{const i=r[u.toLowerCase()][Ie(o)];return fe(S.select,i)}catch{return}},e.getNames=function(o,u={}){"select"in u||(u.select="official");const S=r[o.toLowerCase()];return S===void 0?{}:Xe(S,function(I){return fe(u.select,I)})},e.getAlpha2Code=function(o,u){const S=i=>i.toLowerCase(),I=(i,f)=>S(i)===S(f);try{const i=r[u.toLowerCase()];for(const f in i)if(T(i,f)){if(typeof i[f]=="string"&&I(i[f],o))return f;if(Array.isArray(i[f])){for(const J of i[f])if(I(J,o))return f}}return}catch{return}},e.getSimpleAlpha2Code=function(o,u){const S=i=>a(i.toLowerCase()),I=(i,f)=>S(i)===S(f);try{const i=r[u.toLowerCase()];for(const f in i)if(T(i,f)){if(typeof i[f]=="string"&&I(i[f],o))return f;if(Array.isArray(i[f])){for(const J of i[f])if(I(J,o))return f}}return}catch{return}},e.getAlpha2Codes=function(){return s},e.getAlpha3Code=function(o,u){const S=e.getAlpha2Code(o,u);if(S)return e.toAlpha3(S)},e.getSimpleAlpha3Code=function(o,u){const S=e.getSimpleAlpha2Code(o,u);if(S)return e.toAlpha3(S)},e.getAlpha3Codes=function(){return d},e.getNumericCodes=function(){return A},e.langs=function(){return Object.keys(r)},e.getSupportedLanguages=function(){return n},e.isValid=function(o){if(!o)return!1;const u=o.toString().toUpperCase();return T(d,u)||T(s,u)||T(A,u)}}(Y)),Y}var Kt=_t();const ke=Rt(Kt),$t="en",Ht={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote d'Ivoire","Côte d'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:["South Korea","Korea, Republic of","Republic of Korea"],KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:["Netherlands","The Netherlands","Netherlands (Kingdom of the)"],NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:["Pitcairn","Pitcairn Islands"],PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:["Türkiye","Turkey"],TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:["United Arab Emirates","UAE"],GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA","U.S.A.","US","U.S."],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:["Åland Islands","Aland Islands"],BQ:"Bonaire, Sint Eustatius and Saba",CW:"Curaçao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint Barthélemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"},Vt={locale:$t,countries:Ht};ke.registerLocale(Vt);function Wt(e){const t=document.querySelector("."+l.facts),n=t.querySelector("."+l.year);qt(n,e.release_date);const a=t.querySelector("."+l.country);Zt(a,e.origin_country);const r=t.querySelector("."+l.language);Yt(r,e.spoken_languages);const s=t.querySelector("."+l.runtime);Qt(s,e.runtime);const d=t.querySelector("."+l.rating);zt(d,e.vote_average)}function qt(e,t){if(t){const n=e.querySelector("p");n.textContent=t.slice(0,4)}}function Zt(e,t){if(t.length>0){const n=Jt(t);Ue(e,n)}}function Jt(e){return e.map(t=>ke.alpha2ToAlpha3(t))}function Yt(e,t){if(Array.isArray(t)&&t.length){const n=e.querySelector("h2");ie(n,t);const a=e.querySelector("ul");xt(a,t)}}function xt(e,t){e.innerHTML="";const n=Bt(t,"english_name");Ne(n,e,De.items)}function Qt(e,t){if(t){const n=e.querySelector("p");n.textContent=t+" min"}}function zt(e,t){if(t){const n=e.querySelector("p");n.textContent=t.toFixed(1)}}function N(e,t){const n=e.dataset.id;window.location.href=`${t}.html?id=${n}`}const ce="movie-cards",m="movie-card__",h={movieCard:"movie-card",posterCont:`${m}poster-container`,poster:`${m}poster`,textCont:`${m}text-container`,title:`${m}movieTitle`,year:`${m}movie-year`,overview:`${m}movie-info`,linkCont:`${m}link-container`,link:`${m}link`,linkIcon:`${m}link-icon`},Xt=`${ce}__info-msg`,ee={},le={controlBarElem:["control-bar","control-rem-bar"],btnRemove:["control-bar__btn","control-bar__btn--rem"]},jt="/icons/removeIcon.svg";function en(e){const t=c("div",le.controlBarElem),n=tn(e);return t.append(n),t}function tn(e){let t;return e==="favorites"?t="Remove from favorites":t="Remove from watchlist",se(le.btnRemove,jt,t)}const me=document.querySelector("."+ce);function nn(e){const t=Ge(e);ee.num=t.length,an(t,e)}function an(e,t){if(e.length===0){_e(me);return}e.forEach(n=>me.append(rn(n,t)))}function _e(e){const t=c("p",Xt,!1,"Nothing on the list");e.append(t)}function rn(e,t){const n=c("div",h.movieCard);n.dataset.id=e.id,pe(n);const a=un(e.poster_path),r=en(t),s=on(e);return n.append(a,s,r),pe(n),n}function pe(e){e.addEventListener("click",t=>k(t))}function on(e){const t=c("div",h.textCont),n=sn(e.title);if(t.append(n),e.release_date){const r=ge(h.year,e.release_date.slice(0,4));t.append(r)}if(e.overview){const r=ge(h.overview,e.overview);t.append(r)}const a=cn(e.id);return t.append(a),t}function un(e){const t=c("div",h.posterCont),n=oe(h.poster,e?G+e:"./src/assets/images/no-Image-Placeholder.svg","movie poster");return t.append(n),t}function sn(e){return c("h2",h.title,!1,e||"Unknown")}function ge(e,t){return c("p",e,!1,t)}function cn(e){const t=c("div",h.linkCont),n=Le(h.link,h.linkIcon,Fe+e,ve.TMBDIcon,"TMBD icon");return t.append(n),t}function ln(e){const t=ae(),n=e.target.closest("."+h.movieCard);Pe(Number(n.dataset.id),t),n.remove(),ee.num-=1,ee.num<1&&_e(document.querySelector("."+ce))}function Ke(e,t){const n=e.querySelector("."+C.tooltip);n.textContent=t}function $e(e,t){e.querySelector("."+C.icon).setAttribute("src",t)}function He(e){const t=e.closest("."+C.controlBar);if(t.dataset.movie)return JSON.parse(t.dataset.movie)}function Ve(e){e.target.closest(".fav-btn")?dn(e):e.target.closest(".watch-btn")&&Sn(e)}function dn(e){const t=e.target.closest(".fav-btn"),n=He(t),a=t.dataset.state;a==="on"?We(t,!0,O.likeIcon,n.id):a==="off"&&qe(t,!0,O.dislikeIcon,n)}function Sn(e){const t=e.target.closest(".watch-btn"),n=He(t),a=t.dataset.state;a==="on"?We(t,!1,O.addIcon,n.id):a==="off"&&qe(t,!1,O.addedIcon,n)}function We(e,t,n,a){$e(e,n),Ke(e,t?"add to favorites":"add to watchlist"),Pe(a,t?"favorites":"watchlist"),e.dataset.state="off"}function qe(e,t,n,a){$e(e,n),Ke(e,t?"remove from favorites":"remove from watchlist"),At(a,t?"favorites":"watchlist"),e.dataset.state="on"}function k(e){if(!e.target.closest("a")){if(e.target.closest("."+le.controlBarElem[1]))return ln(e);if(e.target.closest("."+C.controlBar))return Ve(e);if(e.target.closest("."+h.movieCard))return N(e.target.closest(".movie-card"),"movie");if(e.target.closest("."+b.banner))return N(e.target.closest("."+b.banner),"movie")}}function En(e){const t=e,n=document.getElementById(j.hidden);if(n.classList.toggle(l.hiddenCast),n.classList.contains(l.hiddenCast)){t.textContent="see more...";return}t.textContent="see less"}function fn(e){e.dataset.id&&N(e,"genre")}function In(e){if(!e.target.closest("a")){if(e.target.closest("."+b.banner))return k(e);if(e.target.closest("."+l.castBtn))return En(e.target.closest("."+l.castBtn));if(e.target.closest("."+l.genre))return fn(e.target.closest("."+l.genre))}}async function hn(){try{const e=ne(),t=await p(`${ut}?movie_id=${e}`);if(!t){B(L);return}const n=St(t);if(!n){B(L),console.warn("Movie object is empty. Cannot filter movie info");return}An(n.title),Cn(n)}catch(e){console.error("Error during movie processing:",e),B(L)}}function Cn(e){const t=Re(e);L.prepend(t),Mt(e),Wt(e),we(t,e),L.addEventListener("click",In)}function An(e){e&&(document.title=`${e}${re}`)}async function mn(){const e=Ze(5,!0);return await p(`${ct}?page=${e}`)}function pn(e){let t,n=!1;for(;!n;)t=gn(e),n=On(t);return t}function gn(e){return e.results[Ze(e.results.length+1)]}function On(e){return e&&typeof e.backdrop_path=="string"}function Ze(e,t=!1){return t?Math.floor(Math.random()*e)+1:Math.floor(Math.random()*(e+1))}async function Bn(){try{const e=await mn(),t=pn(e),n=Re(t);document.querySelector(".header").append(n),n.addEventListener("click",k),we(n,t)}catch(e){console.error(e)}}const x="genre__",w={genre:"genre",genreTitle:`${x}title`,scroll:`${x}scrollable`,btn:`${x}watch-all`},R="movie__",y={movie:"movie",img:`${R}img`,info:`${R}info`,title:`${R}title`,year:`${R}year`};function Fn(e){window.sessionStorage.setItem("movies",JSON.stringify(e))}function Mn(e){const t=sessionStorage.getItem(e);return t&&JSON.parse(t).length>0}function bn(e){return JSON.parse(sessionStorage.getItem(e))}const Q="Unknown";async function vn(e,t){document.querySelector(".popup").dataset.id=t;const n=await p(`${it}?movie_id=${t}`);if(!n)return;const a=document.getElementById("movie-popup");Dn(a,t,n),yn(a)}function Tn(e){e.target.closest("a")||(e.target.closest(".popup__close-btn")?Ln(document.getElementById("movie-popup")):e.target.closest(`.${C.controlBar}`)?Ve(e):e.target.closest(".popup")&&N(document.querySelector(".popup"),"movie"))}function Dn(e,t,n){e.querySelector(".popup__poster").src=n.poster_path?G+n.poster_path:Te,e.querySelector(".popup__title").textContent=n.title||Q,e.querySelector(".popup__year").textContent=n.release_date?n.release_date.slice(0,4):Q,e.querySelector(".popup__tmdb-link").href="https://www.themoviedb.org/movie/"+t,e.querySelector(".popup__overview").textContent=n.overview||Q;const a=e.querySelector(".popup__control-bar-container");a.innerHTML="";const r=ue(n);a.append(r)}function yn(e){e.classList.add("active")}function Ln(e){e.classList.remove("active")}function Nn(e){if(e.target.closest(".popup"))Tn(e);else if(e.target.closest(".movie")){const t=e.target.closest(".movie").dataset.id;vn(e,t)}else e.target.closest(".genre")&&N(e.target.closest(".genre"),"genre")}const Oe=document.querySelector(".genres"),z=[];async function Pn(){Mn("movies")?Gn():await Rn(),document.getElementById("main").addEventListener("click",Nn)}function Gn(){bn("movies").forEach(t=>Je(t))}async function Rn(){const t=(await p(`${Me}`)).genres;for(let n of t){const a=await p(`${be}?genre_id=${n.id}`);wn(a,n.id,n.name),Je(a),z.push(a)}mt(z),Fn(z)}function wn(e,t,n){e.genre_id=t,e.genre_name=n}function Je(e){if(!e||!e.results||e.results.length<1){B(Oe);return}const t=Un(e.genre_id,e.genre_name),n=kn(e.results);t.append(n),Oe.append(t)}function Un(e,t){const n=c("div",w.genre);n.dataset.id=e;const a=c("h2",w.genreTitle,!1,t),r=c("button",w.btn,!1,"See all");return n.append(a,r),n}function kn(e){const t=e.slice(0,10),n=c("div",w.scroll);return t.forEach(a=>{const r=_n(a);n.innerHTML+=r}),n}function _n(e){const{id:t,title:n,poster_path:a,release_date:r}=e;let s="";r&&(s=`<p class="${y.year}">${r.slice(0,4)}</p>`);const d=a?`${G}${a}`:Te;return`
                    <div class="${y.movie}" data-id="${t}">
                        <img src="${d}" alt="${n}" class="${y.img}">
                        <div class="${y.info}">
                            <h3 class="${y.title}">${n}</h3>
                            ${s}
                        </div>
                    </div>
                `}function _(){const e=document.createElement("button");e.id="scrollToTopButton",e.textContent="Up",e.classList.add("scroll-top"),document.body.appendChild(e),window.addEventListener("scroll",()=>{window.scrollY>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function Ye(e){return e.replaceAll(" ","+")}function Kn(){const e=document.querySelector(".search__icon");e.addEventListener("click",()=>{let t=document.getElementById("search__input").value.trim();if(!t)return;const n=Ye(t);window.location.href=`search.html?title=${n}`}),document.getElementById("search__input").addEventListener("keyup",function(t){t.key==="Enter"&&e.click()})}document.querySelector(".movie-cards");document.getElementById("load-more");function de(e,t){Array.isArray(e)&&e.forEach(n=>{const a=$n(n);t.appendChild(a)})}function $n(e){const t=document.createElement("div");t.classList.add("movie-card"),t.setAttribute("data-id",e.id);const n=e.poster_path?`${G}${e.poster_path}`:"./src/assets/images/no-Image-Placeholder.svg";return t.innerHTML=` <div class="movie-card__poster-container"> <img class="movie-card__poster" src="${n}" alt ="${e.title} Poster"> </div>
    <div class="movie-card__text-container"> <h3 class="movie-card__movieTitle">${e.title}</h3>
    <p>${e.release_date?e.release_date.slice(0,4):""}</p>
    <p class="movie-card__movie-info">${e.overview}</p> </div>
    `,t.querySelector(".movie-card__text-container").append(ue(e)),t.addEventListener("click",a=>k(a)),t}function xe(e){const t=document.querySelector(".main-title");t.textContent=e}function Se(e,t){return e<t}function K(e,t){if(t){e.style.display="block";return}e.style.display="none"}const v={},P={},F=document.querySelector(".movie-cards"),$=document.getElementById("load-more");let M,Hn=1;async function Vn(){if(Wn(),!v.search){B(F);return}let e=await p(v.search);if(!e||e.results.length<1){B(F,"No movies found");return}qn(),Zn(e)}function Wn(){if(M=nt(),!M)return;const e=Ye(M);v.search=`${st}?title=${e}`}function qn(){M&&(document.title=`${M}${re}`)}function Zn(e){xe(`Search results for "${M}":`);const t=Jn(e);de(t,F),P.search=e.total_pages,K($,Se(Hn,P.search))}function Jn(e){const t=[];return e.results.forEach(n=>{t.push({id:n.id,title:n.title,poster_path:n.poster_path,release_date:n.release_date,overview:n.overview})}),t}let Yn=1,te;async function xn(){Qn();const e=Ge("movies");let t;if(e&&e.length>0?(t=zn(e),Be(t.genre_name)):(t=await p(v.genre),Be()),!t||!t.results||t.results.length<1){K($,!1),B(F);return}Xn(t)}function Qn(){te=Number(ne()),v.genre=`${be}?genre_id=${te}`}function zn(e){if(e&&e.length>0)return e.filter(n=>n.genre_id===Number(ne()))[0]}async function Be(e){e||(e=await Qe()),e&&(document.title=`${e}${re}`)}async function Qe(){return(await p(Me)).genres.find(a=>a.id===te).name}async function Xn(e){let t=e.genre_name;e.genre_name||(t=await Qe()),xe(t),de(e.results,F),P.genre=e.total_pages,K($,Se(Yn,P.genre))}let X=1;function ze(){document.getElementById("load-more").addEventListener("click",jn)}async function jn(){const e=ae(),t=await It(v[e],X+1);if(!t||t<1){showErrorMsg(F);return}de(t,F),X+=1,K($,Se(X,P[e]))}(g()==="/"||g()==="/index.html")&&document.addEventListener("DOMContentLoaded",()=>{Bn(),Pn(),_()});g()==="/movie.html"&&document.addEventListener("DOMContentLoaded",hn);g()==="/genre.html"&&document.addEventListener("DOMContentLoaded",()=>{xn(),_(),ze()});document.addEventListener("DOMContentLoaded",Kn);g()==="/search.html"&&document.addEventListener("DOMContentLoaded",()=>{Vn(),_(),ze()});(g()==="/favorites.html"||g()==="/watchlist.html")&&document.addEventListener("DOMContentLoaded",()=>{nn(ae()),_()});
